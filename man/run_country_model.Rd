% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/modelling.R
\name{run_country_model}
\alias{run_country_model}
\title{Run Country-Specific Spatial Modeling Workflow}
\usage{
run_country_model(
  country_code,
  dhs_data_path = "01_data/1a_dhs_data/processed/dhs_pr_records_combined.rds",
  shape_path = "01_data/1c_shapefiles/district_shape.gpkg",
  pop_raster_path = "01_data/1b_rasters/worldpop_100m",
  ur_raster_path = "01_data/1b_rasters/urban_extent/afurextent.asc",
  model_output_path = "03_outputs/3a_model_outputs",
  plot_output_path = "03_outputs/3b_visualizations",
  raster_output_path = "03_outputs/3c_raster_outputs",
  table_output_path = "03_outputs/3c_table_outputs",
  cell_size = 5000,
  n_sim = 5000,
  ignore_cache = FALSE,
  age_range_table = c(0, 100),
  interval_table = 5,
  age_range_raster = c(0, 4),
  interval_raster = 1,
  return_prop = TRUE,
  scale_outcome = "log_scale",
  shape_outcome = "log_shape",
  covariates = "urban",
  cpp_script_name = "02_scripts/model",
  return_results = FALSE
)
}
\arguments{
\item{country_code}{Character. The ISO3 country code (e.g., "TZA" for
Tanzania).}

\item{dhs_data_path}{Character. Path to DHS data. Default:
"01_data/1a_dhs_data/processed/dhs_pr_records_combined.rds".}

\item{shape_path}{Character. Path to DHS data. Default:
"01_data/1c_shapefiles/district_shape.gpkg".}

\item{pop_raster_path}{Character. Path to DHS data. Default:
"01_data/1b_rasters/worldpop_100m".}

\item{ur_raster_path}{Character. Path to urban-rural extent data. Default:
"01_data/1b_rasters/urban_extent/afurextent.asc".}

\item{model_output_path}{Character. Path to save model outputs. Default:
"03_outputs/3a_model_outputs".}

\item{plot_output_path}{Character. Path to save visualization outputs.
Default: "03_outputs/3b_visualizations".}

\item{raster_output_path}{Character. Path to save raster outputs. Default:
"03_outputs/3c_raster_outputs".}

\item{table_output_path}{Character. Path to save table outputs. Default:
"03_outputs/3c_table_outputs".}

\item{cell_size}{Numeric. Cell size (meters) for predictor generation.
Default: 5000.}

\item{n_sim}{Numeric. Number of simulations for gamma predictions.
Default: 10000.}

\item{ignore_cache}{Logical. Whether to ignore cached data. Default: FALSE.}

\item{age_range_table}{Numeric vector. Age range for table generation.
Default: c(0, 100).}

\item{interval_table}{Numeric. Age interval for table generation.
Default: 5.}

\item{age_range_raster}{Numeric vector. Age range for raster generation.
Default: c(0, 50).}

\item{interval_raster}{Numeric. Age interval for raster generation.
Default: 5.}

\item{return_prop}{Logical. Whether to return proportion in raster output.
Default: TRUE.}

\item{scale_outcome}{Character. Outcome variable for scaling. Default:
"log_scale".}

\item{shape_outcome}{Character. Outcome variable for shaping. Default:
"log_shape".}

\item{covariates}{Character. Covariates for the spatial model. Default:
"urban".}

\item{cpp_script_name}{Character. Path to the C++ script for the model.
Default: "02_scripts/model_optim".}

\item{return_results}{Logical. Whether to return the function outputs or not.
Default: TRUE.}
}
\value{
A list containing the following components:
  \item{spat_model_param}{Fitted spatial model parameters.}
  \item{predictor_data}{Predictor dataset used for modeling.}
  \item{gamma_prediction}{Generated gamma predictions.}
  \item{pred_list}{Processed gamma prediction results.}
  \item{final_data}{Age-population table data.}
  \item{age_pop_raster}{Generated gridded age-population raster.}
}
\description{
This function runs the entire spatial modeling workflow for a given country
code. It processes DHS data, fits a spatial model, generates predictions,
creates population tables, and produces raster outputs. The function is
modular and can be reused for different countries with minimal adjustments.
}
\examples{
# Run the model for Tanzania with default parameters
# results <- run_country_model(country_code = "TZA")

# Access specific components from the results
# spat_model_param <- results$spat_model_param
# age_pop_raster <- results$age_pop_raster

# Visualize the raster
# terra::plot(age_pop_raster)
}
