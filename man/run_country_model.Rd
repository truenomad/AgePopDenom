% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/modelling.R
\name{run_country_model}
\alias{run_country_model}
\title{Run Country-Specific Spatial Modeling Workflow}
\usage{
run_country_model(
  country_code,
  survey_data_path = here::here("01_data", "1a_survey_data", "processed"),
  survey_data_suffix = "dhs_pr_records_combined.rds",
  shape_path = here::here("01_data", "1c_shapefiles"),
  shape_suffix = "district_shape.gpkg",
  pop_raster_path = here::here("01_data", "1b_rasters", "pop_raster"),
  pop_raster_suffix = "_ppp_2020_constrained.tif",
  ur_raster_path = here::here("01_data", "1b_rasters", "urban_extent", "afurextent.asc"),
  ur_raster_suffix = "afurextent.asc",
  model_output_path = here::here("03_outputs", "3a_model_outputs"),
  plot_output_path = here::here("03_outputs", "3b_visualizations"),
  raster_output_path = here::here("03_outputs", "3c_raster_outputs"),
  table_output_path = here::here("03_outputs", "3c_table_outputs"),
  compiled_output_path = here::here("03_outputs", "3d_compiled_results"),
  excel_output_file = here::here("03_outputs", "3d_compiled_results",
    "age_pop_denom_compiled.xlsx"),
  cell_size = 5000,
  n_sim = 5000,
  ignore_cache = FALSE,
  age_range_table = c(0, 99),
  interval_table = 1,
  return_prop = TRUE,
  scale_outcome = "log_scale",
  shape_outcome = "log_shape",
  covariates = "urban",
  cpp_script_name = here::here("02_scripts", "model"),
  return_results = FALSE
)
}
\arguments{
\item{country_code}{Character. The ISO3 country code (e.g., "TZA" for
Tanzania).}

\item{survey_data_path}{Character. Path to Survey data. Default:
"01_data/1a_survey_data/processed".}

\item{survey_data_suffix}{Character. Suffix for Survey data files. Default:
"dhs_pr_records_combined.rds".}

\item{shape_path}{Character. Path to shapefile data. Default:
"01_data/1c_shapefiles".}

\item{shape_suffix}{Character. Suffix for shapefile data. Default:
"district_shape.gpkg".}

\item{pop_raster_path}{Character. Path to population raster data. Default:
"01_data/1b_rasters/pop_raster".}

\item{pop_raster_suffix}{Character. Suffix for population raster files. Default:
"_ppp_2020_constrained.tif".}

\item{ur_raster_path}{Character. Path to urban-rural extent data. Default:
"01_data/1b_rasters/urban_extent/afurextent.asc".}

\item{ur_raster_suffix}{Character. Suffix for urban-rural raster. Default:
"afurextent.asc".}

\item{model_output_path}{Character. Path to save model outputs. Default:
"03_outputs/3a_model_outputs".}

\item{plot_output_path}{Character. Path to save visualization outputs.
Default: "03_outputs/3b_visualizations".}

\item{raster_output_path}{Character. Path to save raster outputs. Default:
"03_outputs/3c_raster_outputs".}

\item{table_output_path}{Character. Path to save table outputs. Default:
"03_outputs/3c_table_outputs".}

\item{compiled_output_path}{Character. Path to save compiled results. Default:
"03_outputs/3d_compiled_results".}

\item{excel_output_file}{A character string specifying the output Excel file path.
Default is "03_outputs/3d_compiled_results/age_pop_denom_2020.xlsx" in the
project directory.}

\item{cell_size}{Numeric. Cell size (meters) for predictor generation.
Default: 5000.}

\item{n_sim}{Numeric. Number of simulations for gamma predictions.
Default: 5000.}

\item{ignore_cache}{Logical. Whether to ignore cached data. Default: FALSE.}

\item{age_range_table}{Numeric vector. Age range for table generation.
Default: c(0, 99).}

\item{interval_table}{Numeric. Age interval for table generation.
Default: 1.}

\item{return_prop}{Logical. Whether to return proportion in raster output.
Default: TRUE.}

\item{scale_outcome}{Character. Outcome variable for scaling. Default:
"log_scale".}

\item{shape_outcome}{Character. Outcome variable for shaping. Default:
"log_shape".}

\item{covariates}{Character. Covariates for the spatial model. Default:
"urban".}

\item{cpp_script_name}{Character. Path to the C++ script for the model.
Default: "02_scripts/model".}

\item{return_results}{Logical. Whether to return the function outputs or not.
Default: FALSE.}
}
\value{
If return_results is TRUE, a list containing the following components:
  \item{spat_model_param}{Fitted spatial model parameters.}
  \item{predictor_data}{Predictor dataset used for modeling.}
  \item{gamma_prediction}{Generated gamma predictions.}
  \item{pred_list}{Processed gamma prediction results.}
  \item{final_age_pop_table}{Age-population table data.}
  \item{final_pop}{Compiled population data for all countries.}
  \item{all_mod_params}{Compiled model parameters for all countries.}
}
\description{
This function runs the entire spatial modeling workflow for a given country
code. It processes Survey data, fits a spatial model, generates predictions,
creates population tables, and produces raster outputs. The function is
modular and can be reused for different countries with minimal adjustments.
}
\examples{
# Run the model for Tanzania with default parameters
# results <- run_country_model(country_code = "TZA")

# Access specific components from the results
# spat_model_param <- results$spat_model_param
# final_pop <- results$final_pop

}
